from PyQt4 import QtGui, QtCore, uic
import pybel, openbabel

mol2 = openbabel.OBMol()
# mol2.AddConformer()
print pybel.operations

mol = pybel.readfile('pdb', 'nil.pdb').next()
# mol.operations
mol.conformers(zz)





def p(x):
    print x


class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        uic.loadUi('redirect.ui', self)

        print 'Connecting process'
        self.process = QtCore.QProcess(self)
        self.process.readyReadStandardOutput.connect(self.stdoutReady)
        self.process.readyReadStandardError.connect(self.stderrReady)
        self.process.started.connect(lambda: p('Started!'))
        self.process.finished.connect(lambda: p('Finished!'))
        pp = 'apply(GridDefinition, ["D:\PyCharmProjects\PyCharmProjects\\4fkk_best.pdb", None,None,"lalala.txt"]'
        ppp = 'D:\Python27\programs\\vina.exe vina --receptor 4fkk_best_h.pdbqt --ligand nag_h.pdbqt --config obj_center.txt --cpu 4'
        prog = 'D:\Python27\programs\\vina.exe'
        arg1 = ['vina', '--receptor', '4fkk_best_h.pdbqt', '--ligand', 'nag_h.pdbqt', '--config', 'obj_center.txt',
                '--cpu', '4']
        print 'Starting process'
        self.process.start('apply()')

    def append(self, text):
        cursor = self.textEdit.textCursor()
        cursor.movePosition(cursor.PreviousWord)
        cursor.insertText(text)
        # self.output.ensureCursorVisible()

    def stdoutReady(self):
        text = str(self.process.readAllStandardOutput())
        print text.strip()
        self.append(text)

    def stderrReady(self):
        text = str(self.process.readAllStandardError())
        print text.strip()
        self.append(text)


def main():
    import sys
    app = QtGui.QApplication(sys.argv)
    win = MainWindow()
    win.show()
    sys.exit(app.exec_())


if __name__ == '__main__':
    main()
